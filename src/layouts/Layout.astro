---
import "../styles/global.css";
import { ClientRouter } from "astro:transitions";
import {
  MapPin,
  Phone,
  Mail,
  Facebook,
  Twitter,
  Linkedin,
  Instagram,
  ArrowRight,
} from "lucide-react";
import SpeedInsights from "@vercel/speed-insights/astro";
import Analytics from "@vercel/analytics/astro";

/**
 * Layout Component
 * Main layout wrapper with navbar and footer
 *
 * @param {Object} props
 * @param {string} props.title - Page title
 */
const { title = "Instalaciones García's" } = Astro.props;
---

<!doctype html>
<html lang="es" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="generator" content={Astro.generator} />

    <!-- SEO Meta Tags -->
    <meta
      name="description"
      content="Instalaciones García's - Soluciones profesionales en instalaciones eléctricas, mantenimiento industrial y proyectos institucionales con más de 15 años de experiencia."
    />
    <meta
      name="keywords"
      content="instalaciones eléctricas, mantenimiento industrial, proyectos institucionales, electricidad, construcción"
    />
    <meta name="author" content="Instalaciones García's" />

    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={Astro.url} />
    <meta property="og:title" content={title} />
    <meta
      property="og:description"
      content="Soluciones profesionales en instalaciones eléctricas y proyectos institucionales con calidad premium."
    />
    <meta
      property="og:image"
      content="https://images.unsplash.com/photo-1473341304170-971dccb5ac1e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80"
    />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={Astro.url} />
    <meta property="twitter:title" content={title} />
    <meta
      property="twitter:description"
      content="Soluciones profesionales en instalaciones eléctricas y proyectos institucionales con calidad premium."
    />
    <meta
      property="twitter:image"
      content="https://images.unsplash.com/photo-1473341304170-971dccb5ac1e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1200&q=80"
    />

    <title>{title}</title>
    <ClientRouter />

    <!-- JSON-LD Structured Data for Local Business -->
    <script type="application/ld+json" is:inline>
      {
        "@context": "https://schema.org",
        "@type": "GeneralContractor",
        "name": "Instalaciones García's",
        "image": "https://instalacionesgarciasfronted.vercel.app/favicon.svg",
        "@id": "https://instalacionesgarciasfronted.vercel.app",
        "url": "https://instalacionesgarciasfronted.vercel.app",
        "telephone": "+525589001234",
        "address": {
          "@type": "PostalAddress",
          "streetAddress": "Av. Tecnológico 2405, Piso 8",
          "addressLocality": "Ciudad de México",
          "postalCode": "11560",
          "addressCountry": "MX"
        },
        "geo": {
          "@type": "GeoCoordinates",
          "latitude": 19.4326,
          "longitude": -99.1332
        },
        "openingHoursSpecification": {
          "@type": "OpeningHoursSpecification",
          "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
          "opens": "08:00",
          "closes": "18:00"
        },
        "sameAs": [
          "https://www.facebook.com/instalacionesgarcias",
          "https://www.instagram.com/instalacionesgarcias"
        ]
      }
    </script>
  </head>
  <body
    class="flex flex-col min-h-screen font-sans bg-primary text-text-main antialiased selection:bg-white selection:text-black"
  >
    {
      process.env.VERCEL === "1" && (
        <>
          <SpeedInsights />
          <Analytics />
        </>
      )
    }
    <!-- Navbar with Glassmorphism -->
    <header
      id="navbar"
      class="fixed top-0 w-full z-50 transition-all duration-500 border-b border-white/0"
    >
      <div
        class="absolute inset-0 bg-black/0 backdrop-blur-[0px] transition-all duration-500"
        id="navbar-bg"
      >
      </div>

      <nav
        class="container mx-auto flex items-center justify-between py-4 px-4 md:px-6 relative z-10"
      >
        <!-- Logo / Brand -->
        <a
          href="/"
          class="text-lg md:text-xl lg:text-2xl font-bold tracking-tighter text-white hover:text-gray-200 transition-colors duration-300 flex items-center gap-2"
        >
          <div
            class="w-8 h-8 bg-white text-black flex items-center justify-center rounded-lg font-black text-sm"
          >
            IG
          </div>
          <span>Instalaciones <span class="font-light">García's</span></span>
        </a>

        <!-- Desktop Navigation Links -->
        <ul class="hidden md:flex gap-8 text-sm font-medium">
          {
            ["Inicio", "Servicios", "Proyectos", "Contacto"].map((item) => (
              <li>
                <a
                  href={item === "Inicio" ? "/" : `/${item.toLowerCase()}`}
                  class="text-gray-300 hover:text-white transition-colors duration-300 relative group py-2"
                >
                  {item}
                  <span class="absolute bottom-0 left-0 w-0 h-[1px] bg-white transition-all duration-300 group-hover:w-full" />
                </a>
              </li>
            ))
          }
        </ul>

        <!-- CTA Button -->
        <div class="hidden md:block">
          <a
            href="/contacto"
            class="relative px-6 py-2.5 group overflow-hidden rounded-full bg-white text-black font-bold text-xs uppercase tracking-wider transition-all duration-300 hover:shadow-[0_0_20px_rgba(255,255,255,0.4)] hover:scale-105"
          >
            <span
              class="relative z-10 group-hover:text-black transition-colors duration-300"
              >Cotizar Ahora</span
            >
            <div
              class="absolute inset-0 bg-gradient-to-r from-gray-100 via-white to-gray-100 opacity-0 group-hover:opacity-100 transition-opacity duration-300"
            >
            </div>
            <div
              class="absolute inset-0 bg-white opacity-0 group-hover:animate-shine"
            >
            </div>
          </a>
        </div>

        <!-- Mobile Menu Button -->
        <button
          id="mobile-menu-button"
          class="md:hidden relative w-10 h-10 rounded-lg bg-white/10 hover:bg-white/20 border border-white/10 transition-all duration-300 flex items-center justify-center group overflow-hidden"
          aria-label="Toggle mobile menu"
        >
          <div
            class="absolute inset-0 bg-gradient-to-tr from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"
          >
          </div>
          <div class="relative w-5 h-4 flex flex-col justify-between">
            <span
              class="w-full h-0.5 bg-white rounded-full transform transition-all duration-300 origin-left group-hover:w-4"
            ></span>
            <span
              class="w-full h-0.5 bg-white rounded-full transition-all duration-300 group-hover:w-3"
            ></span>
            <span
              class="w-full h-0.5 bg-white rounded-full transform transition-all duration-300 origin-left group-hover:w-4"
            ></span>
          </div>
        </button>
      </nav>

      <!-- Mobile Menu -->
      <div
        id="mobile-menu"
        class="md:hidden hidden bg-black/95 backdrop-blur-xl border-t border-white/10 absolute w-full h-screen"
      >
        <ul
          class="flex flex-col items-center justify-center h-[80vh] space-y-8"
        >
          <li>
            <a
              href="/"
              class="flex flex-col items-center gap-2 text-2xl text-gray-300 hover:text-white transition-colors duration-300 group"
            >
              <div
                class="p-3 rounded-full bg-white/5 group-hover:bg-white/10 transition-colors"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-home w-6 h-6 group-hover:scale-110 transition-transform"
                  ><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"
                  ></path><polyline points="9 22 9 12 15 12 15 22"
                  ></polyline></svg
                >
              </div>
              <span>Inicio</span>
            </a>
          </li>
          <li>
            <a
              href="/servicios"
              class="flex flex-col items-center gap-2 text-2xl text-gray-300 hover:text-white transition-colors duration-300 group"
            >
              <div
                class="p-3 rounded-full bg-white/5 group-hover:bg-white/10 transition-colors"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-briefcase w-6 h-6 group-hover:scale-110 transition-transform"
                  ><rect width="20" height="14" x="2" y="7" rx="2" ry="2"
                  ></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"
                  ></path></svg
                >
              </div>
              <span>Servicios</span>
            </a>
          </li>
          <li>
            <a
              href="/proyectos"
              class="flex flex-col items-center gap-2 text-2xl text-gray-300 hover:text-white transition-colors duration-300 group"
            >
              <div
                class="p-3 rounded-full bg-white/5 group-hover:bg-white/10 transition-colors"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-folder-git-2 w-6 h-6 group-hover:scale-110 transition-transform"
                  ><path
                    d="M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v5"
                  ></path><circle cx="13" cy="12" r="2"></circle><path
                    d="M18 19c-2.8 0-5-2.2-5-5v8"></path><circle
                    cx="20"
                    cy="19"
                    r="2"></circle></svg
                >
              </div>
              <span>Proyectos</span>
            </a>
          </li>
          <li>
            <a
              href="/contacto"
              class="flex flex-col items-center gap-2 text-2xl text-gray-300 hover:text-white transition-colors duration-300 group"
            >
              <div
                class="p-3 rounded-full bg-white/5 group-hover:bg-white/10 transition-colors"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="lucide lucide-mail w-6 h-6 group-hover:scale-110 transition-transform"
                  ><rect width="20" height="16" x="2" y="4" rx="2"></rect><path
                    d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></svg
                >
              </div>
              <span>Contacto</span>
            </a>
          </li>
        </ul>
      </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow">
      <slot />
    </main>

    <!-- Mega Footer with Brutalist Design & Phosphorescent Icons -->
    <footer
      class="bg-[#050505] border-t border-white/5 pt-24 pb-12 relative overflow-hidden spotlight-group"
      style="--mouse-x: 0px; --mouse-y: 0px;"
    >
      <!-- Spotlight Overlay -->
      <div
        class="absolute inset-0 pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity duration-500"
        style="background: radial-gradient(600px circle at var(--mouse-x) var(--mouse-y), rgba(255,255,255,0.06), transparent 40%);"
      >
      </div>

      <!-- Massive Typography Background -->
      <div
        class="absolute top-0 left-0 w-full h-full overflow-hidden pointer-events-none opacity-[0.03] select-none"
      >
        <span
          class="text-[20vw] font-black text-white leading-none whitespace-nowrap absolute -top-10 left-0"
        >
          GARCÍA
        </span>
      </div>

      <div class="container mx-auto px-6 relative z-10">
        <div class="grid grid-cols-1 md:grid-cols-12 gap-12 mb-20">
          <!-- Brand Column (Span 4) -->
          <div class="md:col-span-4 space-y-8 text-center md:text-left">
            <a href="/" class="inline-block">
              <div
                class="flex items-center gap-3 group justify-center md:justify-start"
              >
                <div
                  class="w-12 h-12 bg-white text-black flex items-center justify-center rounded-xl font-black text-xl group-hover:scale-110 transition-transform duration-300"
                >
                  IG
                </div>
                <div class="flex flex-col text-left">
                  <span
                    class="text-2xl font-bold text-white tracking-tight leading-none"
                    >Instalaciones</span
                  >
                  <span
                    class="text-2xl font-light text-gray-400 tracking-widest leading-none group-hover:text-white transition-colors"
                    >García's</span
                  >
                </div>
              </div>
            </a>
            <p
              class="text-gray-400 text-sm leading-relaxed max-w-sm mx-auto md:mx-0"
            >
              Transformamos la industria con soluciones de ingeniería de
              vanguardia. Calidad inquebrantable, seguridad absoluta y diseño
              funcional.
            </p>

            <!-- Social Links with Phosphorescent Hovers -->
            <div class="flex gap-4 justify-center md:justify-start">
              <a
                href="#"
                class="w-12 h-12 rounded-xl bg-white/5 flex items-center justify-center text-gray-400 transition-all duration-300 group hover:bg-white/10 hover:-translate-y-1"
                aria-label="Facebook"
              >
                <Facebook
                  size={20}
                  className="group-hover:text-[#1877F2] group-hover:drop-shadow-[0_0_8px_rgba(24,119,242,0.8)] transition-all duration-300"
                />
              </a>
              <a
                href="#"
                class="w-12 h-12 rounded-xl bg-white/5 flex items-center justify-center text-gray-400 transition-all duration-300 group hover:bg-white/10 hover:-translate-y-1"
                aria-label="Twitter"
              >
                <Twitter
                  size={20}
                  className="group-hover:text-[#1DA1F2] group-hover:drop-shadow-[0_0_8px_rgba(29,161,242,0.8)] transition-all duration-300"
                />
              </a>
              <a
                href="#"
                class="w-12 h-12 rounded-xl bg-white/5 flex items-center justify-center text-gray-400 transition-all duration-300 group hover:bg-white/10 hover:-translate-y-1"
                aria-label="LinkedIn"
              >
                <Linkedin
                  size={20}
                  className="group-hover:text-[#0A66C2] group-hover:drop-shadow-[0_0_8px_rgba(10,102,194,0.8)] transition-all duration-300"
                />
              </a>
              <a
                href="#"
                class="w-12 h-12 rounded-xl bg-white/5 flex items-center justify-center text-gray-400 transition-all duration-300 group hover:bg-white/10 hover:-translate-y-1"
                aria-label="Instagram"
              >
                <Instagram
                  size={20}
                  className="group-hover:text-[#E4405F] group-hover:drop-shadow-[0_0_8px_rgba(228,64,95,0.8)] transition-all duration-300"
                />
              </a>
            </div>
          </div>

          <!-- Navigation Links (Span 2) -->
          <div class="md:col-span-2 text-center md:text-left">
            <h3
              class="text-white font-bold mb-8 text-sm tracking-widest uppercase border-b border-white/10 pb-2 inline-block"
            >
              Explorar
            </h3>
            <ul class="space-y-4">
              <li>
                <a
                  href="/"
                  class="text-gray-400 hover:text-white transition-all duration-300 hover:translate-x-2 inline-block flex items-center gap-2 group justify-center md:justify-start"
                >
                  <span
                    class="w-1.5 h-1.5 rounded-full bg-white/20 group-hover:bg-white group-hover:shadow-[0_0_8px_rgba(255,255,255,0.8)] transition-all"
                  ></span>
                  Inicio
                </a>
              </li>
              <li>
                <a
                  href="/servicios"
                  class="text-gray-400 hover:text-white transition-all duration-300 hover:translate-x-2 inline-block flex items-center gap-2 group justify-center md:justify-start"
                >
                  <span
                    class="w-1.5 h-1.5 rounded-full bg-white/20 group-hover:bg-white group-hover:shadow-[0_0_8px_rgba(255,255,255,0.8)] transition-all"
                  ></span>
                  Servicios
                </a>
              </li>
              <li>
                <a
                  href="/proyectos"
                  class="text-gray-400 hover:text-white transition-all duration-300 hover:translate-x-2 inline-block flex items-center gap-2 group justify-center md:justify-start"
                >
                  <span
                    class="w-1.5 h-1.5 rounded-full bg-white/20 group-hover:bg-white group-hover:shadow-[0_0_8px_rgba(255,255,255,0.8)] transition-all"
                  ></span>
                  Proyectos
                </a>
              </li>
              <li>
                <a
                  href="/contacto"
                  class="text-gray-400 hover:text-white transition-all duration-300 hover:translate-x-2 inline-block flex items-center gap-2 group justify-center md:justify-start"
                >
                  <span
                    class="w-1.5 h-1.5 rounded-full bg-white/20 group-hover:bg-white group-hover:shadow-[0_0_8px_rgba(255,255,255,0.8)] transition-all"
                  ></span>
                  Contacto
                </a>
              </li>
            </ul>
          </div>

          <!-- Services Links (Span 3) -->
          <div class="md:col-span-3 text-center md:text-left">
            <h3
              class="text-white font-bold mb-8 text-sm tracking-widest uppercase border-b border-white/10 pb-2 inline-block"
            >
              Servicios
            </h3>
            <ul class="space-y-4">
              <li>
                <a
                  href="/servicios"
                  class="text-gray-400 hover:text-white transition-all duration-300 hover:translate-x-2 inline-block group"
                >
                  Instalaciones Eléctricas
                </a>
              </li>
              <li>
                <a
                  href="/servicios"
                  class="text-gray-400 hover:text-white transition-all duration-300 hover:translate-x-2 inline-block group"
                >
                  Mantenimiento Industrial
                </a>
              </li>
              <li>
                <a
                  href="/servicios"
                  class="text-gray-400 hover:text-white transition-all duration-300 hover:translate-x-2 inline-block group"
                >
                  Proyectos Institucionales
                </a>
              </li>
              <li>
                <a
                  href="/servicios"
                  class="text-gray-400 hover:text-white transition-all duration-300 hover:translate-x-2 inline-block group"
                >
                  Consultoría Técnica
                </a>
              </li>
            </ul>
          </div>

          <!-- Contact Info (Span 3) -->
          <div class="md:col-span-3 text-center md:text-left">
            <h3
              class="text-white font-bold mb-8 text-sm tracking-widest uppercase border-b border-white/10 pb-2 inline-block"
            >
              Contacto
            </h3>
            <ul class="space-y-6">
              <li class="group">
                <div
                  class="flex items-start gap-4 justify-center md:justify-start"
                >
                  <div
                    class="w-10 h-10 rounded-lg bg-white/5 flex items-center justify-center flex-shrink-0 group-hover:bg-white/10 transition-colors"
                  >
                    <MapPin
                      className="w-5 h-5 text-gray-400 group-hover:text-[#F59E0B] group-hover:drop-shadow-[0_0_8px_rgba(245,158,11,0.8)] transition-all duration-300"
                    />
                  </div>
                  <div class="text-left">
                    <span
                      class="block text-xs text-gray-500 mb-1 uppercase tracking-wider"
                      >Dirección</span
                    >
                    <span
                      class="text-gray-300 text-sm leading-relaxed group-hover:text-white transition-colors"
                      >Av. Tecnológico 2405, Piso 8,<br />Torre Empresarial,
                      CDMX</span
                    >
                  </div>
                </div>
              </li>
              <li class="group">
                <div
                  class="flex items-start gap-4 justify-center md:justify-start"
                >
                  <div
                    class="w-10 h-10 rounded-lg bg-white/5 flex items-center justify-center flex-shrink-0 group-hover:bg-white/10 transition-colors"
                  >
                    <Phone
                      className="w-5 h-5 text-gray-400 group-hover:text-[#10B981] group-hover:drop-shadow-[0_0_8px_rgba(16,185,129,0.8)] transition-all duration-300"
                    />
                  </div>
                  <div class="text-left">
                    <span
                      class="block text-xs text-gray-500 mb-1 uppercase tracking-wider"
                      >Teléfono</span
                    >
                    <span
                      class="text-gray-300 text-sm group-hover:text-white transition-colors"
                      >+52 (55) 8900-1234</span
                    >
                  </div>
                </div>
              </li>
              <li class="group">
                <div
                  class="flex items-start gap-4 justify-center md:justify-start"
                >
                  <div
                    class="w-10 h-10 rounded-lg bg-white/5 flex items-center justify-center flex-shrink-0 group-hover:bg-white/10 transition-colors"
                  >
                    <Mail
                      className="w-5 h-5 text-gray-400 group-hover:text-[#8B5CF6] group-hover:drop-shadow-[0_0_8px_rgba(139,92,246,0.8)] transition-all duration-300"
                    />
                  </div>
                  <div class="text-left">
                    <span
                      class="block text-xs text-gray-500 mb-1 uppercase tracking-wider"
                      >Email</span
                    >
                    <span
                      class="text-gray-300 text-sm group-hover:text-white transition-colors"
                      >proyectos@instalacionesgarcias.com</span
                    >
                  </div>
                </div>
              </li>
            </ul>
          </div>
        </div>

        <!-- Footer Bottom -->
        <div
          class="border-t border-white/5 pt-8 flex flex-col md:flex-row justify-between items-center gap-6"
        >
          <p class="text-xs text-gray-600 font-medium text-center md:text-left">
            © 2025 Instalaciones García's S.A. de C.V. <span
              class="hidden md:inline mx-2">|</span
            > Todos los derechos reservados.
          </p>
          <div class="flex gap-8">
            <a
              href="/privacidad"
              class="text-xs text-gray-600 hover:text-white transition-colors"
              >Privacidad</a
            >
            <a
              href="/terminos"
              class="text-xs text-gray-600 hover:text-white transition-colors"
              >Términos</a
            >
            <a
              href="/sitemap"
              class="text-xs text-gray-600 hover:text-white transition-colors"
              >Mapa del Sitio</a
            >
          </div>
        </div>
      </div>
    </footer>
  </body>
</html>

<style>
  html,
  body {
    margin: 0;
    width: 100%;
    /* height: 100%; Removed to prevent scrolling issues */
  }
</style>

<script>
  // Navbar logic wrapper to support View Transitions
  function setupNavbar() {
    // Navbar scroll effect with Glassmorphism
    const navbar = document.getElementById("navbar");
    const navbarBg = document.getElementById("navbar-bg");

    let lastScrollY = window.scrollY;
    let ticking = false;

    const onScroll = () => {
      lastScrollY = window.scrollY;

      if (!ticking) {
        window.requestAnimationFrame(() => {
          if (lastScrollY > 50) {
            navbar?.classList.add("border-white/10");
            navbar?.classList.remove("border-white/0");

            navbarBg?.classList.remove("bg-black/0", "backdrop-blur-[0px]");
            navbarBg?.classList.add("bg-black/80", "backdrop-blur-md");
          } else {
            navbar?.classList.remove("border-white/10");
            navbar?.classList.add("border-white/0");

            navbarBg?.classList.add("bg-black/0", "backdrop-blur-[0px]");
            navbarBg?.classList.remove("bg-black/80", "backdrop-blur-md");
          }
          ticking = false;
        });

        ticking = true;
      }
    };

    window.addEventListener("scroll", onScroll);

    // Mobile menu toggle
    const mobileMenuButton = document.getElementById("mobile-menu-button");
    const mobileMenu = document.getElementById("mobile-menu");

    const toggleMenu = () => {
      mobileMenu?.classList.toggle("hidden");

      // Add solid background when menu is open
      // Animate hamburger to X
      const spans = mobileMenuButton?.querySelectorAll("span");

      if (!mobileMenu?.classList.contains("hidden")) {
        navbarBg?.classList.add("bg-black/95", "backdrop-blur-xl");

        // Transform to X
        if (spans && spans.length === 3) {
          spans[0].classList.add("rotate-45", "translate-x-px");
          spans[1].classList.add("opacity-0", "translate-x-2");
          spans[2].classList.add("-rotate-45", "translate-x-px");
        }
      } else {
        if (window.scrollY <= 50) {
          navbarBg?.classList.remove("bg-black/95", "backdrop-blur-xl");
        }

        // Reset to hamburger
        if (spans && spans.length === 3) {
          spans[0].classList.remove("rotate-45", "translate-x-px");
          spans[1].classList.remove("opacity-0", "translate-x-2");
          spans[2].classList.remove("-rotate-45", "translate-x-px");
        }
      }
    };

    mobileMenuButton?.addEventListener("click", toggleMenu);

    // Spotlight Effect Logic
    const spotlightGroups = document.querySelectorAll(".spotlight-group");

    spotlightGroups.forEach((group) => {
      group.addEventListener("mousemove", (e) => {
        const mouseEvent = e as MouseEvent;
        const element = group as HTMLElement;

        requestAnimationFrame(() => {
          const rect = element.getBoundingClientRect();
          const x = mouseEvent.clientX - rect.left;
          const y = mouseEvent.clientY - rect.top;

          element.style.setProperty("--mouse-x", `${x}px`);
          element.style.setProperty("--mouse-y", `${y}px`);
        });
      });
    });
  }

  // Run on initial load
  setupNavbar();

  // Run on subsequent navigations
  document.addEventListener("astro:page-load", setupNavbar);
</script>
